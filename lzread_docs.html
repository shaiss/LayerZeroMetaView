<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-developers/evm/lzread/overview" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Read External State (LayerZero Read) | LayerZero</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" property="og:image" content="https://docs.layerzero.network/img/layerzerocover.jpeg"><meta data-rh="true" name="twitter:image" content="https://docs.layerzero.network/img/layerzerocover.jpeg"><meta data-rh="true" property="og:url" content="https://docs.layerzero.network/v2/developers/evm/lzread/overview"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" name="twitter:description" content="LayerZero is an open-source, immutable messaging protocol designed to facilitate the creation of omnichain, interoperable applications."><meta data-rh="true" name="twitter:title" content="LayerZero"><meta data-rh="true" name="keywords" content="LayerZero"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Read External State (LayerZero Read) | LayerZero"><meta data-rh="true" name="description" content="LayerZero Read extends the existing LayerZero omnichain messaging protocol to enable developers to not only send cross-chain messages, but also request and retrieve on-chain state from other supported blockchains."><meta data-rh="true" property="og:description" content="LayerZero Read extends the existing LayerZero omnichain messaging protocol to enable developers to not only send cross-chain messages, but also request and retrieve on-chain state from other supported blockchains."><link data-rh="true" rel="icon" href="/img/favicon.svg"><link data-rh="true" rel="canonical" href="https://docs.layerzero.network/v2/developers/evm/lzread/overview"><link data-rh="true" rel="alternate" href="https://docs.layerzero.network/v2/developers/evm/lzread/overview" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.layerzero.network/v2/developers/evm/lzread/overview" hreflang="x-default"><link rel="preconnect" href="https://us.i.posthog.com">
<script>!function(t,e){var o,s,r,i;e.__SV||(window.posthog=e,e._i=[],e.init=function(a,n,p){function c(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(r=t.createElement("script")).type="text/javascript",r.async=!0,r.src=n.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(i=t.getElementsByTagName("script")[0]).parentNode.insertBefore(r,i);var g=e;for(void 0!==p?g=e[p]=[]:p="posthog",g.people=g.people||[],g.toString=function(t){var e="posthog";return"posthog"!==p&&(e+="."+p),t||(e+=" (stub)"),e},g.people.toString=function(){return g.toString(1)+".people (stub)"},o="capture identify alias people.set people.set_once set_config register register_once unregister opt_out_capturing has_opted_out_capturing opt_in_capturing reset isFeatureEnabled onFeatureFlags getFeatureFlag getFeatureFlagPayload reloadFeatureFlags group updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures getActiveMatchingSurveys getSurveys onSessionId".split(" "),s=0;s<o.length;s++)c(g,o[s]);e._i.push([a,n,p])},e.__SV=1)}(document,window.posthog||[]),posthog.init("phc_FKFvx6yE6NXkuDpggWMscWn1IddMAAbyjv4v3Y3i2Ji",{api_host:"https://us.i.posthog.com",id:"default"})</script>
<link rel="search" type="application/opensearchdescription+xml" title="LayerZero" href="/opensearch.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap">
<link rel="stylesheet" href="/katex/katex.min.css"><link rel="stylesheet" href="/assets/css/styles.ac5837e7.css">
<link rel="preload" href="/assets/js/runtime~main.808314c4.js" as="script">
<link rel="preload" href="/assets/js/main.f10babb7.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?t("light"):t("dark")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" role="banner"><div class="content_knG7 announcementBarContent_xLdY">LayerZero Read is live! Learn how to use LayerZero to read and compute external blockchain state by visiting <a target="_blank" rel="noopener noreferrer" href="/v2/developers/evm/lzread/overview" style="color: #7a3dfc;">lzRead Overview</a>.</div></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a href="https://layerzero.network" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/LayerZero_Logo_Black.svg" alt="LayerZero Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/LayerZero_Logo_White.svg" alt="LayerZero Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/v2">Home</a><a class="navbar__item navbar__link" href="/v2/concepts/getting-started/what-is-layerzero">Core Concepts</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">EVM</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/v2/developers/evm/overview">EVM</a></li><li><a class="dropdown__link" href="/v2/developers/solana/overview">Solana</a></li><li><a class="dropdown__link" href="/v2/developers/aptos-move/overview">Aptos Move</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Deployments</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/v2/deployments/deployed-contracts">V2 Protocol Contracts + Executor (Chains)</a></li><li><a class="dropdown__link" href="/v1/deployments/deployed-contracts">V1 Protocol Contracts + Relayer (Chains)</a></li><li><a class="dropdown__link" href="/v2/deployments/dvn-addresses">Decentralized Verifier Networks (DVNs)</a></li><li><a class="dropdown__link" href="/v2/deployments/read-contracts">LayerZero Read Channels</a></li></ul></div><a class="navbar__item navbar__link" href="/v2/workers/overview">Run Workers</a><a class="navbar__item navbar__link" href="/v2/tools/overview">Ecosystem Tools</a><a class="navbar__item navbar__link" href="/community">Community</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/v2">Endpoint V2 Docs</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/v2/developers/evm/lzread/overview">Endpoint V2 Docs</a></li><li><a class="dropdown__link" href="/v1">Endpoint V1 Docs</a></li></ul></div><div class="searchBox_P97z"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><div class="toggle_MW0i"><button class="clean-btn toggleButton_yw5v toggleButtonDisabled_BJd7" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="lightToggleIcon_SFTY"><path d="M9.99858 14.544C12.509 14.544 14.544 12.509 14.544 9.99858C14.544 7.48819 12.509 5.45312 9.99858 5.45312C7.48819 5.45312 5.45312 7.48819 5.45312 9.99858C5.45312 12.509 7.48819 14.544 9.99858 14.544Z" stroke="#141414" stroke-linecap="round" stroke-linejoin="round"></path><path d="M17.5781 10H18.3357" stroke="#141414" stroke-linecap="square" stroke-linejoin="round"></path><path d="M10 2.42164V1.66406" stroke="#141414" stroke-linecap="square" stroke-linejoin="round"></path><path d="M10 18.3318V17.5742" stroke="#141414" stroke-linecap="square" stroke-linejoin="round"></path><path d="M16.0623 16.0623L15.3047 15.3047" stroke="#141414" stroke-linecap="square" stroke-linejoin="round"></path><path d="M16.0623 3.9375L15.3047 4.69508" stroke="#141414" stroke-linecap="square" stroke-linejoin="round"></path><path d="M3.9375 16.0623L4.69508 15.3047" stroke="#141414" stroke-linecap="square" stroke-linejoin="round"></path><path d="M3.9375 3.9375L4.69508 4.69508" stroke="#141414" stroke-linecap="square" stroke-linejoin="round"></path><path d="M1.66406 10H2.42164" stroke="#141414" stroke-linecap="square" stroke-linejoin="round"></path></svg><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="darkToggleIcon_ekgs"><path d="M3 9.61624C3 13.6942 6.30582 17 10.3838 17C13.2829 17 15.7918 15.3292 17 12.8979C10.3838 12.8979 7.10209 9.61624 7.10209 3C4.67083 4.20823 3 6.71712 3 9.61624Z" stroke="#F2F2F2" stroke-linecap="round"></path></svg></button></div><div class="navBarMenuToggle_Vxc3"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><div class="icon_p7i7" aria-expanded="false"><div class="iconStripe_gWEK"></div><div class="iconStripe_gWEK"></div><div class="iconStripe_gWEK"></div></div></button></div></div></div><div role="presentation" class="backdrop_YQwA navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_NXUq"><div class="sidebarViewport_P4AQ"><div class="sidebar_mhZE"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_qCLW menuWithAnnouncementBar_uer5"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">LayerZero for EVM Developers</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2/developers/evm/overview">Start Here</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2/developers/evm/getting-started">Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2/developers/evm/oft/native-transfer">Sending Tokens</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2/developers/evm/developer-overview">Technical Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2/tools/overview">Ecosystem Tools</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a href="https://layerzeroscan.com/" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK" tabindex="0">LayerZero Scan Explorer<svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" class="iconExternalLink_2l9O"><path d="M6 1.12354H1.125V10.8735H10.875V5.99854H10.125V10.1235H1.875V1.87354H6V1.12354Z" fill="currentColor"></path><path d="M10.875 1.125H7.50003V1.875H9.5947L5.73486 5.73484L6.26519 6.26516L10.125 2.40533V4.5H10.875V1.125Z" fill="currentColor"></path></svg></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2/concepts/glossary">Glossary</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Omnichain CLI Toolkit</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2/developers/evm/create-lz-oapp/start">CLI Setup Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2/developers/evm/create-lz-oapp/project-config">Adding Networks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2/developers/evm/create-lz-oapp/testing">Testing Contracts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2/developers/evm/create-lz-oapp/deploying">Deploying Contracts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2/developers/evm/create-lz-oapp/configuring-pathways">Configuring Contracts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2/developers/evm/create-lz-oapp/debugging">Debugging LayerZero Errors</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Contract Standards</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2/developers/evm/oapp/overview">Omnichain Application (OApp)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2/developers/evm/oft/quickstart">Omnichain Fungible Token (OFT)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2/developers/evm/onft/quickstart">Omnichain NFT (ONFT)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2/developers/evm/composer/overview">Omnichain Composability</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2/developers/evm/oapp/message-design-patterns">OApp Patterns &amp; Extensions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2/developers/evm/oft/oft-patterns-extensions">OFT Patterns &amp; Extensions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2/developers/evm/technical-reference/transfer-ownership">Contract Ownership</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active">Reading External State</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/v2/developers/evm/lzread/overview">Read Overview (lzRead)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2/developers/evm/lzread/read-cli">Read CLI Setup Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2/developers/evm/lzread/read-types">Supported Data Types</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Technical Reference</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2/developers/evm/technical-reference/api">Solidity API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2/developers/evm/technical-reference/tx-pricing">Fees</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2/developers/evm/evm-variants/evm-compatible-variants">EVM Chain Compatibility</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2/developers/evm/technical-reference/integration-checklist">Integration Checklist</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2/developers/evm/technical-reference/simple-config">Experimental Simple Config</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Configuration</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2/developers/evm/configuration/dvn-executor-config">DVN &amp; Executor Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2/developers/evm/configuration/options">Execution Gas Options</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2/developers/evm/configuration/gas-fees">Estimating Source Gas Fees</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Tooling</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2/developers/evm/tooling/uniform-address">Deploy Deterministic Addresses</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2/developers/evm/tooling/test-helper">TestHelper</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2/developers/evm/tooling/layerzeroscan">LayerZero Scan</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Troubleshooting</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2/developers/evm/troubleshooting/debugging-messages">Debugging Messages</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/v2/developers/evm/troubleshooting/error-messages">Error Codes</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1"><hr></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://layerzero.network/publications/LayerZero_Whitepaper_V2.0.pdf" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK">Whitepaper<svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" class="iconExternalLink_2l9O"><path d="M6 1.12354H1.125V10.8735H10.875V5.99854H10.125V10.1235H1.875V1.87354H6V1.12354Z" fill="currentColor"></path><path d="M10.875 1.125H7.50003V1.875H9.5947L5.73486 5.73484L6.26519 6.26516L10.125 2.40533V4.5H10.875V1.125Z" fill="currentColor"></path></svg></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://github.com/LayerZero-Labs/Audits/tree/main/audits" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK">Audits<svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" class="iconExternalLink_2l9O"><path d="M6 1.12354H1.125V10.8735H10.875V5.99854H10.125V10.1235H1.875V1.87354H6V1.12354Z" fill="currentColor"></path><path d="M10.875 1.125H7.50003V1.875H9.5947L5.73486 5.73484L6.26519 6.26516L10.125 2.40533V4.5H10.875V1.125Z" fill="currentColor"></path></svg></a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><span class="breadcrumbs__link">Reading External State</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Read Overview (lzRead)</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: Endpoint V2 Docs</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Read External State (LayerZero Read)</h1></header><p><strong>LayerZero Read</strong> extends the existing LayerZero omnichain messaging protocol to enable developers to not only send cross-chain messages, but also <strong>request</strong> and <strong>retrieve</strong> on-chain state from other supported blockchains.</p><p>This new capability transforms how cross-chain data is accessed, manipulated, and computed, allowing developers to offload complex computations from on-chain applications to <a href="/v2/concepts/modular-security/security-stack-dvns">Decentralized Verifier Networks (DVNs)</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="blockchain-query-language">Blockchain Query Language<a href="#blockchain-query-language" class="hash-link" aria-label="Direct link to Blockchain Query Language" title="Direct link to Blockchain Query Language">​</a></h2><p><code>lzRead</code> is the implementation of LayerZero&#x27;s <strong>Blockchain Query Language</strong> — a universal, standardized language for constructing, retrieving, and processing data requests on-chain across multiple blockchains and off-chain sources.</p><p>Using <code>lzRead</code>, developers can configure secure, low-latency data queries within smart contracts and manage custom security settings, offering significant flexibility in balancing security, cost, and data accuracy.</p><p>The first implementation of BQL is <code>ReadCodecV1.sol</code>, enabling smart contracts to request data in the form of <code>calldata</code>, <code>public</code> state variables, and non state-changing function calls (i.e., <code>view</code> and <code>pure</code> functions).</p><p>As <code>lzRead</code> evolves, additional capabilities such as querying event logs, private state variables, and even external data sources may be integrated, further extending the versatility of <code>lzRead</code> as a comprehensive data sourcing utility for on-chain applications.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="workflow">Workflow<a href="#workflow" class="hash-link" aria-label="Direct link to Workflow" title="Direct link to Workflow">​</a></h2><p><img loading="lazy" alt="OFT Example" src="/assets/images/lzRead-diagram-light-ae369055be445948c929ce6efd9c4860.svg#gh-light-mode-only" width="1920" height="1000" class="img_ev3q">
<img loading="lazy" alt="OFT Example" src="/assets/images/lzRead-diagram-dark-37959e0626227cfcfed4c398c9c7d118.svg#gh-dark-mode-only" width="1920" height="1000" class="img_ev3q"></p><ol><li><p><strong>Request Definition</strong>: An <code>OApp</code> sends a <code>lzRead</code> command by calling <code>EndpointV2.send()</code> with a read-specific <code>eid</code> argument called a channel identifier, and encoding the specific target chain and the block from which the state needs to be retrieved. This command is processed using a custom Send Library (<code>ReadLib1002</code>) that serializes the request and directs it to the appropriate chain via the application&#x27;s configured <code>DVN(s)</code>.</p></li><li><p><strong>DVN Fetch and Return</strong>: The <code>DVN</code> assigned to the request fetches the data from an archival node on the target chain. The DVN executes <code>eth_call</code> on the node with the provided calldata for the target chain, and optionally processes the return data off-chain via compute logic defined by the application in a target <code>OApp.lzMap()</code> and <code>OApp.lzReduce()</code> function, before finally delivering the return data hash to be validated by the configured <code>DVN threshold</code> in the Receive Library (in this case the same <code>ReadLib1002</code>).</p></li><li><p><strong>Response Handling (lzReceive)</strong>: Once the response hash is verified, the <code>Executor</code> delivers the actual response data to <code>OApp.lzReceive()</code> on the original requesting chain. The same receive workflow used by LayerZero&#x27;s V2 protocol is triggered via <code>EndpointV2.lzReceive()</code>.</p></li><li><p><strong>Execution and Custom Logic</strong>: The <code>OApp</code> processes the response data using the logic defined in the application smart contract via an internal <code>_lzReceive()</code>, allowing the developer to customize how the retrieved state is processed and used.</p></li></ol><p>In this way, <strong>lzRead</strong> transforms the normal messaging workflow from cross-chain message delivery to a <code>request</code> and <code>response</code> model.</p><table><thead><tr><th></th><th><strong>Description</strong></th><th><strong>endpoint.send</strong></th><th><strong>endpoint.lzReceive</strong></th></tr></thead><tbody><tr><td><strong>Omnichain<!-- --> <!-- -->Message</strong></td><td>The <code>bytes</code> sent match the <code>bytes</code> received.</td><td><code>bytes _message</code></td><td><code>bytes _message</code></td></tr><tr><td><strong>Omnichain Read</strong></td><td>The <code>bytes</code> request differs from the <code>bytes</code> response.</td><td><code>bytes _request</code></td><td><code>bytes _response</code></td></tr></tbody></table><p>Instead of sending a source message and using Decentralized Verifier Networks (DVNs) to deliver to the destination, you can now use Decentralized Verifier Networks (DVNs) to read directly from nodes on the destination blockchain.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="supported-chains">Supported Chains<a href="#supported-chains" class="hash-link" aria-label="Direct link to Supported Chains" title="Direct link to Supported Chains">​</a></h2><p><code>lzRead</code> requires a read compatible Message Library and DVN, meaning you can only use <code>lzRead</code> on chains with both supported implementations deployed.</p><p>You can find these Message Libraries (<code>ReadLib1002</code>) and Compatible DVNs under <a href="/v2/deployments/read-contracts">&quot;Read Paths&quot;</a>.</p><p><img loading="lazy" alt="Read DVNs Light" src="/assets/images/read-compatible-dvn-light-696eea8863cabb08f04618372ed87dd2.png#gh-light-mode-only" width="1912" height="460" class="img_ev3q">
<img loading="lazy" alt="Read DVNs Dark" src="/assets/images/read-compatible-dvn-dark-61c6d3fe283013956d11630ed55dd52b.png#gh-dark-mode-only" width="1918" height="464" class="img_ev3q"></p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>Each DVN must also support the target chain to read from (i.e., running an archival node for the target data chain).</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="installation">Installation<a href="#installation" class="hash-link" aria-label="Direct link to Installation" title="Direct link to Installation">​</a></h2><p>To start using LayerZero contracts, you can install the <a href="https://github.com/LayerZero-Labs/devtools/tree/main/packages/oapp-evm" target="_blank" rel="noopener noreferrer">OApp package</a> to an existing project:</p><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">npm</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">yarn</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">pnpm</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">forge</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#0e0e0e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token function" style="color:#8AE06C">npm</span><span class="token plain"> </span><span class="token function" style="color:#8AE06C">install</span><span class="token plain"> @layerzerolabs/oapp-evm</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#0e0e0e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token function" style="color:#8AE06C">yarn</span><span class="token plain"> </span><span class="token function" style="color:#8AE06C">add</span><span class="token plain"> @layerzerolabs/oapp-evm</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#0e0e0e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token function" style="color:#8AE06C">pnpm</span><span class="token plain"> </span><span class="token function" style="color:#8AE06C">add</span><span class="token plain"> @layerzerolabs/oapp-evm</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#0e0e0e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token plain">forge init</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#0e0e0e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token plain">forge </span><span class="token function" style="color:#8AE06C">install</span><span class="token plain"> https://github.com/LayerZero-Labs/devtools</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#0e0e0e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token plain">forge </span><span class="token function" style="color:#8AE06C">install</span><span class="token plain"> https://github.com/LayerZero-Labs/layerzero-v2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#0e0e0e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token plain">forge </span><span class="token function" style="color:#8AE06C">install</span><span class="token plain"> OpenZeppelin/openzeppelin-contracts@v5.1.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then add to your <code>foundry.toml</code> under <code>[profile.default]</code>:</p><div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#0e0e0e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token plain">[profile.default]</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">src = &quot;src&quot;</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">out = &quot;out&quot;</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">libs = [&quot;lib&quot;]</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">remappings = [</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    &#x27;@layerzerolabs/oapp-evm/=lib/devtools/packages/oapp-evm/&#x27;,</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    &#x27;@layerzerolabs/lz-evm-protocol-v2/=lib/layerzero-v2/packages/layerzero-v2/evm/protocol&#x27;,</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    &#x27;@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/&#x27;,</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">]</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"># See more config options https://github.com/foundry-rs/foundry/blob/master/crates/config/README.md#all-options</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>LayerZero contracts work with both <a href="https://docs.openzeppelin.com/contracts/5.x/access-control#ownership-and-ownable" target="_blank" rel="noopener noreferrer"><strong>OpenZeppelin V5</strong></a> and V4 contracts. Specify your desired version in your project&#x27;s package.json:</p><div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#0e0e0e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token string-property property" style="color:#F2F2F2">&quot;resolutions&quot;</span><span class="token operator" style="color:#F2F2F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token string-property property" style="color:#F2F2F2">&quot;@openzeppelin/contracts&quot;</span><span class="token operator" style="color:#F2F2F2">:</span><span class="token plain"> </span><span class="token string" style="color:#F2F2F2">&quot;^5.0.1&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="usage">Usage<a href="#usage" class="hash-link" aria-label="Direct link to Usage" title="Direct link to Usage">​</a></h2><p>To start using <code>lzRead</code>, you will need to:</p><ol><li><p>Decide what origin chains to deploy your application on and what target data chains to read data from.</p></li><li><p>Decide which <code>lzRead</code> compatible DVNs support your target chains.</p></li><li><p>Deploy an <code>lzRead</code> compatible OApp.</p></li><li><p>Set your application&#x27;s send and receive library to <code>ReadLib1002</code> via <code>EndpointV2.setSendLibrary()</code> and <code>EndpointV2.setReceiveLibrary()</code>.</p></li><li><p>Set your application&#x27;s DVN Config via <code>EndpointV2.setConfig()</code>.</p></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="inherit-oappread">Inherit OAppRead<a href="#inherit-oappread" class="hash-link" aria-label="Direct link to Inherit OAppRead" title="Direct link to Inherit OAppRead">​</a></h3><p>Begin by inheriting the <code>OAppRead.sol</code> contract in your own smart contract. Familiarize yourself with the <code>OAppRead</code> implementation to understand how it interacts with LayerZero’s endpoint for both message and read commands.</p><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#0e0e0e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token keyword" style="color:#A77DFF;font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> OAppRead </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:#F2F2F2">&quot;@layerzerolabs/oapp-evm/contracts/oapp/OAppRead.sol&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword" style="color:#A77DFF;font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> Ownable </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:#F2F2F2">&quot;@openzeppelin/contracts/access/Ownable.sol&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword" style="color:#A77DFF;font-style:italic">contract</span><span class="token plain"> </span><span class="token class-name" style="color:#8AE06C">MyOApp</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">is</span><span class="token plain"> OAppRead </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:#A77DFF;font-style:italic">constructor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token builtin" style="color:#F2F2F2">address</span><span class="token plain"> _endpoint</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token builtin" style="color:#F2F2F2">address</span><span class="token plain"> _delegate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token function" style="color:#8AE06C">OAppRead</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">_endpoint</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> _delegate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token function" style="color:#8AE06C">Ownable</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">_delegate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="build-read-query">Build Read Query<a href="#build-read-query" class="hash-link" aria-label="Direct link to Build Read Query" title="Direct link to Build Read Query">​</a></h3><p>To retrieve data from other chains and process it when returned, you need to at minimum create a read request. Below is a step-by-step guide on how to construct these read requests, using an example where we read the price of a Uniswap V3 pool token from multiple chains.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="getting-the-command">Getting the Command<a href="#getting-the-command" class="hash-link" aria-label="Direct link to Getting the Command" title="Direct link to Getting the Command">​</a></h4><p>As mentioned above, <strong>lzRead</strong> uses the same send interface as traditional message passing via <code>EndpointV2.send()</code>.</p><p>To start reading data from target chains, you will encode your requests as <code>bytes</code> using the <code>ReadCodecV1.sol</code> and pass the encoding as the <code>bytes _message</code> parameter in the send interface. From here, we&#x27;ll refer to the <code>_message</code> as the <strong>read command</strong>, or <code>_cmd</code>.</p><p>Here&#x27;s an example of how you can initiate the read request:</p><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#0e0e0e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#757575">/**</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#757575"> * @notice Sends a read request to LayerZero, querying Uniswap QuoterV2 for WETH/USDC prices on configured chains.</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#757575"> * @param _extraOptions Additional messaging options, including gas and fee settings.</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#757575"> * @return receipt The LayerZero messaging receipt for the request.</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#757575"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword" style="color:#A77DFF;font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:#8AE06C">readAverageUniswapPrice</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token builtin" style="color:#F2F2F2">bytes</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">calldata</span><span class="token plain"> _extraOptions</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">external</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">payable</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">returns</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">MessagingReceipt </span><span class="token keyword" style="color:#A77DFF;font-style:italic">memory</span><span class="token plain"> receipt</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token builtin" style="color:#F2F2F2">bytes</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">memory</span><span class="token plain"> cmd </span><span class="token operator" style="color:#F2F2F2">=</span><span class="token plain"> </span><span class="token function" style="color:#8AE06C">getCmd</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:#A77DFF;font-style:italic">return</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        </span><span class="token function" style="color:#8AE06C">_lzSend</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">            READ_CHANNEL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">            cmd</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">            </span><span class="token function" style="color:#8AE06C">combineOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">READ_CHANNEL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> READ_MSG_TYPE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> _extraOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">            </span><span class="token function" style="color:#8AE06C">MessagingFee</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">msg</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number" style="color:#F2F2F2">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">            </span><span class="token keyword" style="color:#A77DFF;font-style:italic">payable</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">msg</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">sender</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For example, this <code>getCmd()</code> creates multiple read requests:</p><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#0e0e0e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#757575">/**</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#757575"> * @notice Constructs a command to query the Uniswap QuoterV2 for WETH/USDC prices on all configured chains.</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#757575"> * @return cmd The encoded command to request Uniswap quotes.</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#757575"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword" style="color:#A77DFF;font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:#8AE06C">getCmd</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">view</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">returns</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token builtin" style="color:#F2F2F2">bytes</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">memory</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token builtin" style="color:#F2F2F2">uint256</span><span class="token plain"> pairCount </span><span class="token operator" style="color:#F2F2F2">=</span><span class="token plain"> targetEids</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">length</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    EVMCallRequestV1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">memory</span><span class="token plain"> readRequests </span><span class="token operator" style="color:#F2F2F2">=</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:#8AE06C">EVMCallRequestV1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">pairCount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:#A77DFF;font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token builtin" style="color:#F2F2F2">uint256</span><span class="token plain"> i </span><span class="token operator" style="color:#F2F2F2">=</span><span class="token plain"> </span><span class="token number" style="color:#F2F2F2">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> i </span><span class="token operator" style="color:#F2F2F2">&lt;</span><span class="token plain"> pairCount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> i</span><span class="token operator" style="color:#F2F2F2">++</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        </span><span class="token builtin" style="color:#F2F2F2">uint32</span><span class="token plain"> targetEid </span><span class="token operator" style="color:#F2F2F2">=</span><span class="token plain"> targetEids</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        ChainConfig </span><span class="token keyword" style="color:#A77DFF;font-style:italic">memory</span><span class="token plain"> config </span><span class="token operator" style="color:#F2F2F2">=</span><span class="token plain"> chainConfigs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">targetEid</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        </span><span class="token comment" style="color:#757575">// Define the QuoteExactInputSingleParams</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        IQuoterV2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">QuoteExactInputSingleParams </span><span class="token keyword" style="color:#A77DFF;font-style:italic">memory</span><span class="token plain"> params </span><span class="token operator" style="color:#F2F2F2">=</span><span class="token plain"> IQuoterV2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:#8AE06C">QuoteExactInputSingleParams</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">            tokenIn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">tokenInAddress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">            tokenOut</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">tokenOutAddress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">            amountIn</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number" style="color:#F2F2F2">1</span><span class="token plain"> ether</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token comment" style="color:#757575">// amountIn: 1 WETH</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">            fee</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">fee</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">            sqrtPriceLimitX96</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number" style="color:#F2F2F2">0</span><span class="token plain"> </span><span class="token comment" style="color:#757575">// No price limit</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        </span><span class="token comment" style="color:#757575">// @notice Encode the function call</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        </span><span class="token comment" style="color:#757575">// @dev From Uniswap Docs, this function is not marked view because it relies on calling non-view</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        </span><span class="token comment" style="color:#757575">// functions and reverting to compute the result. It is also not gas efficient and should not</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        </span><span class="token comment" style="color:#757575">// be called on-chain. We take advantage of lzRead to call this function off-chain and get the result</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        </span><span class="token comment" style="color:#757575">// returned back on-chain to the OApp&#x27;s _lzReceive method.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        </span><span class="token comment" style="color:#757575">// https://docs.uniswap.org/contracts/v3/reference/periphery/interfaces/IQuoterV2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        </span><span class="token builtin" style="color:#F2F2F2">bytes</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">memory</span><span class="token plain"> callData </span><span class="token operator" style="color:#F2F2F2">=</span><span class="token plain"> abi</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:#8AE06C">encodeWithSelector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">IQuoterV2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">quoteExactInputSingle</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">selector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> params</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        readRequests</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator" style="color:#F2F2F2">=</span><span class="token plain"> </span><span class="token function" style="color:#8AE06C">EVMCallRequestV1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">            appRequestLabel</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token builtin" style="color:#F2F2F2">uint16</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">i </span><span class="token operator" style="color:#F2F2F2">+</span><span class="token plain"> </span><span class="token number" style="color:#F2F2F2">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">            targetEid</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> targetEid</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">            isBlockNum</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean" style="color:#F2F2F2">false</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">            blockNumOrTimestamp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token builtin" style="color:#F2F2F2">uint64</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">block</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">timestamp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">            confirmations</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">confirmations</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">            to</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">quoterAddress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">            callData</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> callData</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    EVMCallComputeV1 </span><span class="token keyword" style="color:#A77DFF;font-style:italic">memory</span><span class="token plain"> computeSettings </span><span class="token operator" style="color:#F2F2F2">=</span><span class="token plain"> </span><span class="token function" style="color:#8AE06C">EVMCallComputeV1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        computeSetting</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number" style="color:#F2F2F2">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token comment" style="color:#757575">// lzMap() and lzReduce()</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        targetEid</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token function" style="color:#8AE06C">ILayerZeroEndpointV2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">endpoint</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:#8AE06C">eid</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        isBlockNum</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean" style="color:#F2F2F2">false</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        blockNumOrTimestamp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token builtin" style="color:#F2F2F2">uint64</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">block</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">timestamp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        confirmations</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number" style="color:#F2F2F2">15</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        to</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token builtin" style="color:#F2F2F2">address</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:#A77DFF;font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:#A77DFF;font-style:italic">return</span><span class="token plain"> ReadCodecV1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:#8AE06C">encode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number" style="color:#F2F2F2">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> readRequests</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> computeSettings</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>Following best practices, you should create a dedicated function to construct your specific command requests.</p><p>This involves creating an array of <code>EVMCallRequestV1</code> structs, each representing a read operation on a specific chain and contract.</p></div></div><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p><code>_lzSend</code> is an internal <code>virtual</code> method provided in the <code>OApp</code> contract standard, which can be used to invoke the <code>endpoint.send</code> if certain security checks pass:</p><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#0e0e0e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token keyword" style="color:#A77DFF;font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:#8AE06C">_lzSend</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token builtin" style="color:#F2F2F2">uint32</span><span class="token plain"> _dstEid</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token builtin" style="color:#F2F2F2">bytes</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">memory</span><span class="token plain"> _message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token builtin" style="color:#F2F2F2">bytes</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">memory</span><span class="token plain"> _options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    MessagingFee </span><span class="token keyword" style="color:#A77DFF;font-style:italic">memory</span><span class="token plain"> _fee</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token builtin" style="color:#F2F2F2">address</span><span class="token plain"> _refundAddress</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">internal</span><span class="token plain"> virtual </span><span class="token keyword" style="color:#A77DFF;font-style:italic">returns</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">MessagingReceipt </span><span class="token keyword" style="color:#A77DFF;font-style:italic">memory</span><span class="token plain"> receipt</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token comment" style="color:#757575">// @dev Push corresponding fees to the endpoint, any excess is sent back to the _refundAddress from the endpoint.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token builtin" style="color:#F2F2F2">uint256</span><span class="token plain"> messageValue </span><span class="token operator" style="color:#F2F2F2">=</span><span class="token plain"> </span><span class="token function" style="color:#8AE06C">_payNative</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">_fee</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">nativeFee</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:#A77DFF;font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">_fee</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">lzTokenFee </span><span class="token operator" style="color:#F2F2F2">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#F2F2F2">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token function" style="color:#8AE06C">_payLzToken</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">_fee</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">lzTokenFee</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:#A77DFF;font-style:italic">return</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        </span><span class="token comment" style="color:#757575">// solhint-disable-next-line check-send-result</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        endpoint</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">send</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> value</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> messageValue </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">            </span><span class="token function" style="color:#8AE06C">MessagingParams</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">_dstEid</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token function" style="color:#8AE06C">_getPeerOrRevert</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">_dstEid</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> _message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> _options</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> _fee</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">lzTokenFee </span><span class="token operator" style="color:#F2F2F2">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#F2F2F2">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">            _refundAddress</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If using the <code>OApp</code> standard, consider <code>_lzSend</code> the recommended way to call <code>EndpointV2.send()</code>.</p></div></div><br><h4 class="anchor anchorWithStickyNavbar_LWe7" id="call-requests">Call Requests<a href="#call-requests" class="hash-link" aria-label="Direct link to Call Requests" title="Direct link to Call Requests">​</a></h4><p>A properly formatted read request is of type <code>EVMCallRequestV1</code>, which includes the following fields:</p><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#0e0e0e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token plain">readRequests</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator" style="color:#F2F2F2">=</span><span class="token plain"> </span><span class="token function" style="color:#8AE06C">EVMCallRequestV1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    appRequestLabel</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token builtin" style="color:#F2F2F2">uint16</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">i </span><span class="token operator" style="color:#F2F2F2">+</span><span class="token plain"> </span><span class="token number" style="color:#F2F2F2">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    targetEid</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> targetEid</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    isBlockNum</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean" style="color:#F2F2F2">false</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    blockNumOrTimestamp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token builtin" style="color:#F2F2F2">uint64</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">block</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">timestamp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    confirmations</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">confirmations</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    to</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">quoterAddress</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    callData</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> callData</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>appRequestLabel</td><td><code>uint16</code></td><td>A label to identify the request within your application logic. Useful for tracking response types.</td></tr><tr><td>targetEid</td><td><code>uint32</code></td><td>The Endpoint ID of the target chain where the data is to be read from.</td></tr><tr><td>isBlockNum</td><td><code>bool</code></td><td>A boolean indicating whether <code>blockNumOrTimestamp</code> is a block number (<code>true</code>) or a timestamp (<code>false</code>).</td></tr><tr><td>blockNumOrTimestamp</td><td><code>uint64</code></td><td>Specifies the <code>block.number</code> or <code>block.timestamp</code> on the target chain (<code>targetEid</code>) at which to read the state.</td></tr><tr><td>confirmations</td><td><code>uint16</code></td><td>The number of confirmations required to wait for the block or timestamp finality on the target chain.</td></tr><tr><td>to</td><td><code>address</code></td><td>The target contract address on the destination chain (e.g., the Uniswap V3 Quoter contract).</td></tr><tr><td>callData</td><td><code>bytes</code></td><td>The ABI-encoded function calldata.</td></tr></tbody></table><p>The <code>callData</code> field contains the encoded function call that will be executed on the target contract.</p><p>For example, <code>IQuoterV2.quoteExactInputSingle.selector</code> specifies the <code>quoteExactInputSingle</code> function in the Uniswap V3 <code>QuoterV2</code> contract to request a price quote for swapping <code>tokenIn</code> to <code>tokenOut</code> on the specified Uniswap V3 pool.</p><div class="theme-admonition theme-admonition-warning alert alert--danger admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_S0QG"><p>Your target function calldata for the call request should <strong>never revert</strong>. If the target function ever reverts, the DVN can never complete the verification workflow, and the message will be stuck in-flight and block the pathway until the OApp delegate calls <code>EndpointV2.skip()</code> on the reverted nonce.</p><p>Ensure that your target function either uses <code>try-catch</code> to handle reverts, or be confident that your call parameters will never trigger a revert.</p></div></div><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>The <code>EVMCallRequestV1</code> struct is limited to chain <code>calldata</code> because it encodes function calls into a format that can be transmitted and understood across chains using the EVM&#x27;s ABI encoding.</p><p>This limitation means that <code>lzRead</code> can only handle data types compatible with <code>calldata</code>, specifically value types and fixed-size data structures.</p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="optional-compute-logic">Optional: Compute Logic<a href="#optional-compute-logic" class="hash-link" aria-label="Direct link to Optional: Compute Logic" title="Direct link to Optional: Compute Logic">​</a></h4><p>You can optionally specify compute instructions to handle processing the return data after the read request.</p><p><strong>Compute Logic</strong> allows you to transform and condense the data retrieved by your DVNs, ensuring that only the most relevant and actionable information is sent back to your application on the origin chain.</p><p>Compute logic should be formatted as an <code>EVMCallComputeV1</code> struct:</p><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#0e0e0e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token plain">EVMCallComputeV1 </span><span class="token keyword" style="color:#A77DFF;font-style:italic">memory</span><span class="token plain"> computeSettings </span><span class="token operator" style="color:#F2F2F2">=</span><span class="token plain"> </span><span class="token function" style="color:#8AE06C">EVMCallComputeV1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    computeSetting</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number" style="color:#F2F2F2">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token comment" style="color:#757575">// lzMap() and lzReduce()</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    targetEid</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token function" style="color:#8AE06C">ILayerZeroEndpointV2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">endpoint</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:#8AE06C">eid</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    isBlockNum</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean" style="color:#F2F2F2">false</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    blockNumOrTimestamp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token builtin" style="color:#F2F2F2">uint64</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">block</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">timestamp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    confirmations</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number" style="color:#F2F2F2">15</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    to</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token builtin" style="color:#F2F2F2">address</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:#A77DFF;font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>computeSetting</td><td><code>uint8</code></td><td>Specifies the compute operations to perform, such as <code>lzMap()</code> (0), <code>lzReduce()</code>, (1), or <code>lzMap()</code> AND <code>lzReduce()</code> (2). More on this later.</td></tr><tr><td>targetEid</td><td><code>uint32</code></td><td>The Endpoint ID of the target chain where the <code>lzMap()</code> or <code>lzReduce()</code> implementation can be read from.</td></tr><tr><td>isBlockNum</td><td><code>bool</code></td><td>A boolean indicating whether <code>blockNumOrTimestamp</code> is a block number (<code>true</code>) or a timestamp (<code>false</code>).</td></tr><tr><td>blockNumOrTimestamp</td><td><code>uint64</code></td><td>Specifies the <code>block.number</code> or <code>block.timestamp</code> on the target chain at which to read the state.</td></tr><tr><td>confirmations</td><td><code>uint16</code></td><td>The number of confirmations required to wait for the block or timestamp finality on the target chain.</td></tr><tr><td>to</td><td><code>address</code></td><td>The target contract address to view <code>lzMap()</code> and / or <code>lzReduce()</code>.</td></tr></tbody></table><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>Note: The next section will dive deeper into how to define the compute logic within <code>lzMap()</code> and <code>lzReduce()</code>.</p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="encoding-command">Encoding Command<a href="#encoding-command" class="hash-link" aria-label="Direct link to Encoding Command" title="Direct link to Encoding Command">​</a></h4><p>The <code>ReadCodecV1.encode()</code> has been overloaded to support both the <code>readRequest</code> and <code>evmCompute</code>.</p><p>If you only need to read the raw data returned by your call requests, you can finish the encoding and omit the compute logic.</p><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#0e0e0e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token plain">```</span><span class="token keyword" style="color:#A77DFF;font-style:italic">solidity</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token builtin" style="color:#F2F2F2">int16</span><span class="token plain"> appLabel </span><span class="token operator" style="color:#F2F2F2">=</span><span class="token plain"> </span><span class="token number" style="color:#F2F2F2">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token comment" style="color:#757575">// Application label (set as needed)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token comment" style="color:#757575">// Encoding the command without compute logic</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword" style="color:#A77DFF;font-style:italic">return</span><span class="token plain"> ReadCodecV1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:#8AE06C">encode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">appLabel</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> readRequests</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you have defined the command&#x27;s <code>EVMCallRequestV1</code> and the <code>EVMCallComputeV1</code>, you can use the <code>ReadCodecV1</code> to encode the command to end your getter function.</p><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#0e0e0e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token builtin" style="color:#F2F2F2">int16</span><span class="token plain"> appLabel </span><span class="token operator" style="color:#F2F2F2">=</span><span class="token plain"> </span><span class="token number" style="color:#F2F2F2">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token comment" style="color:#757575">// Application label (set as needed)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token comment" style="color:#757575">// Encoding the command</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword" style="color:#A77DFF;font-style:italic">return</span><span class="token plain"> ReadCodecV1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:#8AE06C">encode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">appLabel</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> readRequests</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> evmCompute</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>Different chains have different interpretations of <code>block.number</code> and <code>block.timestamp</code>.</p><p>For example, when calling <code>block.number</code> on Arbitrum L2 the value returned is the block number on Ethereum L1, rather than <code>block.number</code> of the Arbitrum chain itself.</p><p>Consider how these edge cases specific to each <code>targetEid</code> impact your application before finalizing the encoding process for your command from <code>EVMCallRequestV1</code> and <code>EVMCallComputeV1</code>.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="optional-declare-compute-logic">Optional: Declare Compute Logic<a href="#optional-declare-compute-logic" class="hash-link" aria-label="Direct link to Optional: Declare Compute Logic" title="Direct link to Optional: Declare Compute Logic">​</a></h3><p>Compute logic is executed off-chain via your application&#x27;s configured Decentralized Verifier Networks (DVNs). To define specific compute logic, you must target a contract that implements either <code>IOAppMapper</code> or <code>IOAppReducer</code>, which define the <code>lzMap()</code> and <code>lzReduce()</code> functions.</p><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#0e0e0e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#757575">// SPDX-License-Identifier: MIT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword" style="color:#A77DFF;font-style:italic">pragma</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">solidity</span><span class="token plain"> </span><span class="token operator" style="color:#F2F2F2">^</span><span class="token version number" style="color:#F2F2F2">0.8.20</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token comment" style="color:#757575">/// @title IOAppMapper Interface</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token comment" style="color:#757575">/// @notice Defines the lzMap function for mapping operations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword" style="color:#A77DFF;font-style:italic">interface</span><span class="token plain"> </span><span class="token class-name" style="color:#8AE06C">IOAppMapper</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token comment" style="color:#757575">/**</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#757575">     * @notice Processes a single mapping operation</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#757575">     * @param _request The request data in bytes</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#757575">     * @param _response The response data in bytes</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#757575">     * @return A bytes array resulting from the mapping operation</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#757575">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:#A77DFF;font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:#8AE06C">lzMap</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        </span><span class="token builtin" style="color:#F2F2F2">bytes</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">calldata</span><span class="token plain"> _request</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        </span><span class="token builtin" style="color:#F2F2F2">bytes</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">calldata</span><span class="token plain"> _response</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">external</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">view</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">returns</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token builtin" style="color:#F2F2F2">bytes</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">memory</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token comment" style="color:#757575">/// @title IOAppReducer Interface</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token comment" style="color:#757575">/// @notice Defines the lzReduce function for reducing operations</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword" style="color:#A77DFF;font-style:italic">interface</span><span class="token plain"> </span><span class="token class-name" style="color:#8AE06C">IOAppReducer</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token comment" style="color:#757575">/**</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#757575">     * @notice Processes a reduction operation over multiple responses</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#757575">     * @param _cmd The command data in bytes</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#757575">     * @param _responses An array of response data in bytes</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#757575">     * @return A bytes array resulting from the reduction operation</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#757575">     */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:#A77DFF;font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:#8AE06C">lzReduce</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        </span><span class="token builtin" style="color:#F2F2F2">bytes</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">calldata</span><span class="token plain"> _cmd</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        </span><span class="token builtin" style="color:#F2F2F2">bytes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">calldata</span><span class="token plain"> _responses</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">external</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">view</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">returns</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token builtin" style="color:#F2F2F2">bytes</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">memory</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>These optional <code>view</code> or <code>pure</code> functions enable your DVNs to read and compute state changes based on the <code>_response</code> or <code>_responses</code> from each request.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="compute-settings">Compute Settings<a href="#compute-settings" class="hash-link" aria-label="Direct link to Compute Settings" title="Direct link to Compute Settings">​</a></h4><p>When you declare an <code>EVMCallComputeV1</code>, you also select a compute setting for whether your configured DVNs should mutate the <code>_response</code> data using <code>lzMap()</code> (<code>0</code>), <code>lzReduce()</code>, (<code>1</code>), both <code>lzMap()</code> and <code>lzReduce()</code> (<code>2</code>), or no compute setting (<code>3</code>).</p><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#0e0e0e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token builtin" style="color:#F2F2F2">uint8</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">internal</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">constant</span><span class="token plain"> MAP_ONLY </span><span class="token operator" style="color:#F2F2F2">=</span><span class="token plain"> </span><span class="token number" style="color:#F2F2F2">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token builtin" style="color:#F2F2F2">uint8</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">internal</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">constant</span><span class="token plain"> REDUCE_ONLY </span><span class="token operator" style="color:#F2F2F2">=</span><span class="token plain"> </span><span class="token number" style="color:#F2F2F2">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token builtin" style="color:#F2F2F2">uint8</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">internal</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">constant</span><span class="token plain"> MAP_AND_REDUCE </span><span class="token operator" style="color:#F2F2F2">=</span><span class="token plain"> </span><span class="token number" style="color:#F2F2F2">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">EVMCallComputeV1 </span><span class="token keyword" style="color:#A77DFF;font-style:italic">memory</span><span class="token plain"> evmCompute </span><span class="token operator" style="color:#F2F2F2">=</span><span class="token plain"> </span><span class="token function" style="color:#8AE06C">EVMCallComputeV1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line theme-code-block-highlighted-line" style="color:#F2F2F2"><span class="token plain">    computeSetting</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> MAP_AND_REDUCE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token comment" style="color:#757575">// lzMap() and lzReduce()</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    targetEid</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> eid</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token comment" style="color:#757575">// Current chain&#x27;s EID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    isBlockNum</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token boolean" style="color:#F2F2F2">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    blockNumOrTimestamp</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token builtin" style="color:#F2F2F2">uint64</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">block</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">number</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    confirmations</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number" style="color:#F2F2F2">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    to</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token builtin" style="color:#F2F2F2">address</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:#A77DFF;font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token comment" style="color:#757575">// Compute executed in this contract</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><p>If only <code>lzMap()</code>, the returned data to <code>OApp._lzReceive()</code> will be the concatenation of every return output for each <code>_request</code> your <code>lzMap()</code> processes. You will need to track the <code>index</code> of each request made in the command to later decode in your receive logic.</p></li><li><p>If only <code>lzReduce</code>, the <code>lzReduce()</code> implementation will intake the concatenation in order of how the <code>EVMCallRequestV1[]</code> were made as a <code>bytes</code> argument, and return a single <code>bytes</code> output. You can use <code>lzReduce()</code> to aggregate all responses.</p></li><li><p>If both, data will be manipulated on a per request level first via <code>lzMap()</code> and an aggregate level via <code>lzReduce()</code>, before being returned to <code>OApp._lzReceive()</code>.</p></li></ul><p>Implementation details can be found below.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="mapping-requests">Mapping Requests<a href="#mapping-requests" class="hash-link" aria-label="Direct link to Mapping Requests" title="Direct link to Mapping Requests">​</a></h4><p>Mapping refers to defining how to format or process the data returned by each individual request. In the Uniswap example, the <code>lzMap()</code> simplifies the returned data by only decoding the <code>amountOut</code> for use in the <code>lzReduce()</code> step.</p><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#0e0e0e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#757575">/**</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#757575"> * @notice Processes individual Uniswap QuoterV2 responses, encoding the result.</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#757575"> * @param _response The response from the read request.</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#757575"> * @return Encoded token output amount (USDC amount).</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#757575"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword" style="color:#A77DFF;font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:#8AE06C">lzMap</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token builtin" style="color:#F2F2F2">bytes</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">calldata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token builtin" style="color:#F2F2F2">bytes</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">calldata</span><span class="token plain"> _response</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">external</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">pure</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">returns</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token builtin" style="color:#F2F2F2">bytes</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">memory</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:#A77DFF;font-style:italic">require</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">_response</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">length </span><span class="token operator" style="color:#F2F2F2">&gt;=</span><span class="token plain"> </span><span class="token number" style="color:#F2F2F2">32</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:#F2F2F2">&quot;Invalid response length&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token comment" style="color:#757575">// quoteExactInputSingle returns multiple values</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token comment" style="color:#757575">// Decode the response to extract amountOut</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token builtin" style="color:#F2F2F2">uint256</span><span class="token plain"> amountOut</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator" style="color:#F2F2F2">=</span><span class="token plain"> abi</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:#8AE06C">decode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">_response</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token builtin" style="color:#F2F2F2">uint256</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token builtin" style="color:#F2F2F2">uint160</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token builtin" style="color:#F2F2F2">uint32</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token builtin" style="color:#F2F2F2">uint256</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:#A77DFF;font-style:italic">return</span><span class="token plain"> abi</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:#8AE06C">encode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">amountOut</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>The decoding above only decodes to demonstrate how an <code>lzMap()</code> can intake a <code>_response</code>, mutate the returned <code>bytes</code> per <code>_request</code>, and return a new encoded output depending on the needs of your application.</p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="reducing-requests">Reducing Requests<a href="#reducing-requests" class="hash-link" aria-label="Direct link to Reducing Requests" title="Direct link to Reducing Requests">​</a></h4><p>Once you&#x27;ve mapped the individual responses, the <code>lzReduce()</code> function aggregates these mapped responses to produce a final result.</p><p>In the Uniswap example, <code>lzReduce()</code> calculates the average <code>amountOut</code> from all responses.</p><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#0e0e0e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#757575">/**</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#757575"> * @notice Aggregates individual token output amounts to compute an average.</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#757575"> * @param _responses Array of mapped responses containing token output amounts.</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#757575"> * @return Encoded average token output amount.</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#757575"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword" style="color:#A77DFF;font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:#8AE06C">lzReduce</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token builtin" style="color:#F2F2F2">bytes</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">calldata</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token builtin" style="color:#F2F2F2">bytes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">calldata</span><span class="token plain"> _responses</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">external</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">pure</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">returns</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token builtin" style="color:#F2F2F2">bytes</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">memory</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:#A77DFF;font-style:italic">require</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">_responses</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">length </span><span class="token operator" style="color:#F2F2F2">==</span><span class="token plain"> </span><span class="token number" style="color:#F2F2F2">3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:#F2F2F2">&quot;Expected responses from 3 chains&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token builtin" style="color:#F2F2F2">uint256</span><span class="token plain"> total </span><span class="token operator" style="color:#F2F2F2">=</span><span class="token plain"> </span><span class="token number" style="color:#F2F2F2">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:#A77DFF;font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token builtin" style="color:#F2F2F2">uint256</span><span class="token plain"> i </span><span class="token operator" style="color:#F2F2F2">=</span><span class="token plain"> </span><span class="token number" style="color:#F2F2F2">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> i </span><span class="token operator" style="color:#F2F2F2">&lt;</span><span class="token plain"> _responses</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">length</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> i</span><span class="token operator" style="color:#F2F2F2">++</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        </span><span class="token builtin" style="color:#F2F2F2">uint256</span><span class="token plain"> amountOut </span><span class="token operator" style="color:#F2F2F2">=</span><span class="token plain"> abi</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:#8AE06C">decode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">_responses</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token builtin" style="color:#F2F2F2">uint256</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        total </span><span class="token operator" style="color:#F2F2F2">+=</span><span class="token plain"> amountOut</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token builtin" style="color:#F2F2F2">uint256</span><span class="token plain"> averageAmountOut </span><span class="token operator" style="color:#F2F2F2">=</span><span class="token plain"> total </span><span class="token operator" style="color:#F2F2F2">/</span><span class="token plain"> _responses</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">length</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:#A77DFF;font-style:italic">return</span><span class="token plain"> abi</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:#8AE06C">encode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">averageAmountOut</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="creating-request-options">Creating Request Options<a href="#creating-request-options" class="hash-link" aria-label="Direct link to Creating Request Options" title="Direct link to Creating Request Options">​</a></h3><p><code>lzRead</code> uses a new options type, <code>addExecutorLzReadOption</code> to send requests for target data.</p><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#0e0e0e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token plain">OptionsBuilder</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:#8AE06C">newOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:#8AE06C">addExecutorLzReadOption</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number" style="color:#F2F2F2">100</span><span class="token plain">_000</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number" style="color:#F2F2F2">64</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number" style="color:#F2F2F2">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If unfamiliar with <code>_options</code>, you can read the full scope in <a href="/v2/developers/evm/configuration/options">Execution Options</a>, but for reference this send parameter allows you to deliver an amount of <code>gasLimit</code> and/or native gas token automatically to <code>endpoint.lzReceive</code> from your configured Executor.</p><p>For <code>lzRead</code>, an additional requirement for <code>_options</code> is to profile the <code>calldata</code> size of your returned data type:</p><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#0e0e0e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token plain">OptionsBuilder</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:#8AE06C">newOptions</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:#8AE06C">addExecutorLzReadOption</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">GAS_LIMIT</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> CALLDATA_SIZE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> MSG_VALUE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>These <code>_options</code> can be enforced as usual by inheriting the <a href="/v2/developers/evm/oapp/overview#optional-enforced-options">Enforced Options Helper</a> in your <code>OAppRead</code> contract:</p><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#0e0e0e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token keyword" style="color:#A77DFF;font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> OAppRead </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:#F2F2F2">&quot;@layerzerolabs/oapp-evm/contracts/oapp/OAppRead.sol&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword" style="color:#A77DFF;font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"> OAppOptionsType3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> EnforcedOptionParam </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:#F2F2F2">&quot;@layerzerolabs/oapp-evm/contracts/oapp/libs/OAppOptionsType3.sol&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword" style="color:#A77DFF;font-style:italic">contract</span><span class="token plain"> </span><span class="token class-name" style="color:#8AE06C">MyOAppRead</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">is</span><span class="token plain"> OAppRead</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> OAppOptionsType3 </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>Adding any other <code>_options</code> types than the <code>lzReadOption</code> type in <code>endpoint.quote()</code> or <code>endpoint.send()</code> call will cause the transaction to revert on source.</p></div></div><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>The Executor will not deliver the request if the <code>ACTUAL_CALLDATA_SIZE &gt; OPTION_CALLDATA_SIZE</code>. You will need to manually execute the transaction via <code>endpoint.lzReceive()</code>.</p><p>To avoid this, estimate the return calldata size from your target function, and enforce that you add at least the calldata size to your message <code>options</code>.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="receive-responses">Receive Responses<a href="#receive-responses" class="hash-link" aria-label="Direct link to Receive Responses" title="Direct link to Receive Responses">​</a></h3><p>Finally, you need to define your internal handler for incoming messages from the LayerZero protocol. This is where you&#x27;ll process the final aggregated result and use it within your contract.</p><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#0e0e0e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token keyword" style="color:#A77DFF;font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:#8AE06C">_lzReceive</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    Origin </span><span class="token keyword" style="color:#A77DFF;font-style:italic">calldata</span><span class="token plain"> _origin</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token builtin" style="color:#F2F2F2">bytes32</span><span class="token plain"> _guid</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token builtin" style="color:#F2F2F2">bytes</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">calldata</span><span class="token plain"> _message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token builtin" style="color:#F2F2F2">address</span><span class="token plain"> _executor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token builtin" style="color:#F2F2F2">bytes</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">calldata</span><span class="token plain"> _extraData</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">internal</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the Uniswap example, the handler processes the message and emits an event with the average token price:</p><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#0e0e0e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#757575">/// @notice Emitted when the average amount out is computed and received.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword" style="color:#A77DFF;font-style:italic">event</span><span class="token plain"> </span><span class="token function" style="color:#8AE06C">AggregatedPrice</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token builtin" style="color:#F2F2F2">uint256</span><span class="token plain"> averageAmountOut</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token comment" style="color:#757575">/**</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#757575"> * @notice Handles the aggregated average price from Uniswap V3 pool responses received from LayerZero.</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#757575"> * @dev Emits the AggregatedPrice event with the calculated average amount.</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#757575"> * @param _message Encoded average token output amount.</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#757575"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword" style="color:#A77DFF;font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:#8AE06C">_lzReceive</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    Origin </span><span class="token keyword" style="color:#A77DFF;font-style:italic">calldata</span><span class="token plain"> </span><span class="token comment" style="color:#757575">/*_origin*/</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token builtin" style="color:#F2F2F2">bytes32</span><span class="token plain"> </span><span class="token comment" style="color:#757575">/*_guid*/</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token builtin" style="color:#F2F2F2">bytes</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">calldata</span><span class="token plain"> _message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token builtin" style="color:#F2F2F2">address</span><span class="token plain"> </span><span class="token comment" style="color:#757575">/*_executor*/</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token builtin" style="color:#F2F2F2">bytes</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">calldata</span><span class="token plain"> </span><span class="token comment" style="color:#757575">/*_extraData*/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">internal</span><span class="token plain"> override </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:#A77DFF;font-style:italic">require</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">_message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">length </span><span class="token operator" style="color:#F2F2F2">==</span><span class="token plain"> </span><span class="token number" style="color:#F2F2F2">32</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:#F2F2F2">&quot;Invalid message length&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token builtin" style="color:#F2F2F2">uint256</span><span class="token plain"> averagePrice </span><span class="token operator" style="color:#F2F2F2">=</span><span class="token plain"> abi</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:#8AE06C">decode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">_message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token builtin" style="color:#F2F2F2">uint256</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:#A77DFF;font-style:italic">emit</span><span class="token plain"> </span><span class="token function" style="color:#8AE06C">AggregatedPrice</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">averagePrice</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>By using <code>lzRead</code>, you can drastically simplify the amount of logic needed for updating state on-chain.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="setting-libraries-and-dvns">Setting Libraries and DVNs<a href="#setting-libraries-and-dvns" class="hash-link" aria-label="Direct link to Setting Libraries and DVNs" title="Direct link to Setting Libraries and DVNs">​</a></h3><p>You MUST call <code>EndpointV2.setSendLibrary()</code>, <code>EndpointV2.setReceiveLibrary()</code>, and <code>EndpointV2.setConfig()</code> with a valid <code>ReadLib1002</code> and supporting <code>DVN</code> configuration.</p><p>Set your configuration for the Read Library and required DVNs that support <code>lzRead</code>. <a href="/v2/deployments/dvn-addresses">See all available DVNs</a>.</p><p>You can set your DVN configuration either via the <a href="/v2/developers/evm/create-lz-oapp/start">LayerZero CLI tool</a> or via <a href="/v2/developers/evm/configuration/dvn-executor-config">example scripts</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="setting-read-channel">Setting Read Channel<a href="#setting-read-channel" class="hash-link" aria-label="Direct link to Setting Read Channel" title="Direct link to Setting Read Channel">​</a></h3><p>Once your configuration has been applied, simply call <code>OApp.setReadChannel()</code> for the specific channel configuration to set and begin sending messages!</p><p>Channels let you define multiple types of read logic per application. You can specify per request label, per application label, or per channel.</p><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#0e0e0e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#757575">// OAppRead.sol</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token comment" style="color:#757575">// Only Owner</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword" style="color:#A77DFF;font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:#8AE06C">setReadChannel</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token builtin" style="color:#F2F2F2">uint32</span><span class="token plain"> _channelId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token builtin" style="color:#F2F2F2">bool</span><span class="token plain"> _active</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">public</span><span class="token plain"> virtual onlyOwner </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token function" style="color:#8AE06C">_setPeer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">_channelId</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> _active </span><span class="token operator" style="color:#F2F2F2">?</span><span class="token plain"> AddressCast</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:#8AE06C">toBytes32</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token builtin" style="color:#F2F2F2">address</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:#A77DFF;font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token builtin" style="color:#F2F2F2">bytes32</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number" style="color:#F2F2F2">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To see the available channels for each target data chain, see <a href="/v2/deployments/read-contracts">Read Paths</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="debugging-read-commands">Debugging Read Commands<a href="#debugging-read-commands" class="hash-link" aria-label="Direct link to Debugging Read Commands" title="Direct link to Debugging Read Commands">​</a></h3><p>When working with <code>lzRead</code>, you might encounter issues where read commands (Requests and Compute logic) fail to execute as expected. LayerZero provides tools and best practices to help you debug these scenarios effectively.</p><p>When checking LayerZero Scan for the read status, you may encounter the following errors.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="malformed-command">Malformed Command<a href="#malformed-command" class="hash-link" aria-label="Direct link to Malformed Command" title="Direct link to Malformed Command">​</a></h4><p>Malformed indicates that the read command was constructed incorrectly and does not adhere to the required serialization format. This can be due to:</p><ul><li><p>Incorrect packing of the command parameters.</p></li><li><p>Errors in encoding the <code>calldata</code>.</p></li><li><p>Misuse of the <code>ReadCodecV1.sol</code> library during command construction.</p></li></ul><p>To resolve a <strong>Malformed Command</strong>, review how the command was packed on the origin chain by examining your <code>getCmd</code> implementation. Ensure that you are correctly using the <code>ReadCodecV1.sol</code> library for serialization.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="unresolvable-command">Unresolvable Command<a href="#unresolvable-command" class="hash-link" aria-label="Direct link to Unresolvable Command" title="Direct link to Unresolvable Command">​</a></h4><p>The target data chain cannot fulfill the read request due to issues related to invoking the <code>calldata</code> on the target chain, such as:</p><p><strong>Contract Address Issues</strong>:</p><ul><li><p>The specified contract does not exist on the target chain.</p></li><li><p>The contract address is incorrect for the given block number or timestamp.</p></li></ul><p><strong>Method Identifier Issues</strong>:</p><ul><li>The calldata contains an invalid or non-existent method selector.</li></ul><p><strong>State Issues</strong>:</p><ul><li>The contract is deployed, but the state at the specified <code>block.number</code> or <code>block.timestamp</code> does not support the requested operation.</li></ul><p>To resolve an <strong>Unresolvable Command</strong>:</p><ul><li><p>Ensure that the contract exists at the specified address on the target chain.</p></li><li><p>Verify that the contract is deployed and initialized correctly.</p></li><li><p>Double-check the contract address and ensure it matches the target chain&#x27;s deployment.</p></li><li><p>Confirm that the <code>block.number</code> or <code>block.timestamp</code> specified in the read request corresponds to a state where the contract is available.</p></li><li><p>Ensure that the method selector used in the <code>calldata</code> exists in the target contract.</p></li><li><p>Verify that the function signatures match and that the target contract implements the requested methods.</p></li></ul><p>You can use the <a href="/v2/developers/evm/lzread/read-cli#debugging-malformed-or-unresolvable-commands">Read CLI Debugging Task</a> to help with the debugging process by ensuring the command decodes and reads the target data chain correctly.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="dual-messaging-mode">Dual Messaging Mode<a href="#dual-messaging-mode" class="hash-link" aria-label="Direct link to Dual Messaging Mode" title="Direct link to Dual Messaging Mode">​</a></h3><p>Since <code>lzRead</code> is an extension to the base messaging protocol, determine the type of cross-chain functionality your app needs:</p><ol><li><p><strong>LayerZero Messaging</strong>: For standard cross-chain messages without needing to read external state.</p></li><li><p><strong>LayerZero Reads (lzRead)</strong>: To retrieve and use on-chain state from other blockchains.</p></li><li><p><strong>Hybrid (Both)</strong>: To implement both messaging and read capabilities.</p></li></ol><p>Here’s an example of how <code>OAppRead</code> is structured to handle both message-based and read-based responses by implementing a <code>_messageLzReceive</code> and <code>_readLzReceive</code>:</p><div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F2F2F2;--prism-background-color:#0e0e0e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#757575">// SPDX-License-Identifier: MIT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword" style="color:#A77DFF;font-style:italic">pragma</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">solidity</span><span class="token plain"> </span><span class="token operator" style="color:#F2F2F2">^</span><span class="token version number" style="color:#F2F2F2">0.8.20</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword" style="color:#A77DFF;font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">OAppRead</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:#F2F2F2">&quot;@layerzerolabs/oapp-evm/contracts/oapp/OAppRead.sol&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword" style="color:#A77DFF;font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">Origin</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:#F2F2F2">&quot;@layerzerolabs/oapp-evm/contracts/oapp/OApp.sol&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword" style="color:#A77DFF;font-style:italic">import</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain">Ownable</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:#F2F2F2">&quot;@openzeppelin/contracts/access/Ownable.sol&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token comment" style="color:#757575">/// @title MsgAndReadExample</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token comment" style="color:#757575">/// @notice An example contract that extends OAppRead to handle both messaging and read capabilities.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token comment" style="color:#757575">/// @dev Inherits from OApp and adds functionality specific to lzRead.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token keyword" style="color:#A77DFF;font-style:italic">contract</span><span class="token plain"> </span><span class="token class-name" style="color:#8AE06C">MsgAndReadExample</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">is</span><span class="token plain"> OAppRead </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token comment" style="color:#757575">/// lzRead responses are sent from arbitrary channels with Endpoint IDs in the range of</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token comment" style="color:#757575">/// `eid &gt; 4294965694` (which is `type(uint32).max - 1600`).</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token builtin" style="color:#F2F2F2">uint32</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">constant</span><span class="token plain"> READ_CHANNEL_EID_THRESHOLD </span><span class="token operator" style="color:#F2F2F2">=</span><span class="token plain"> </span><span class="token number" style="color:#F2F2F2">4294965694</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token comment" style="color:#757575">/// @param _endpoint The address of the LayerZero endpoint.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token comment" style="color:#757575">/// @param _delegate The address of the delegate contract.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:#A77DFF;font-style:italic">constructor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token builtin" style="color:#F2F2F2">address</span><span class="token plain"> _endpoint</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token builtin" style="color:#F2F2F2">address</span><span class="token plain"> _delegate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token function" style="color:#8AE06C">OAppRead</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">_endpoint</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> _delegate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token function" style="color:#8AE06C">Ownable</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">_delegate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token comment" style="color:#757575">/// @notice Internal function to handle incoming messages and read responses.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token comment" style="color:#757575">/// @dev Filters messages based on `srcEid` to determine the type of incoming data.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token comment" style="color:#757575">/// @param _origin The origin information containing the source Endpoint ID (`srcEid`).</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token comment" style="color:#757575">/// @param _guid The unique identifier for the received message.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token comment" style="color:#757575">/// @param _message The encoded message data.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token comment" style="color:#757575">/// @param _executor The executor address.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token comment" style="color:#757575">/// @param _extraData Additional data.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:#A77DFF;font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:#8AE06C">_lzReceive</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        Origin </span><span class="token keyword" style="color:#A77DFF;font-style:italic">calldata</span><span class="token plain"> _origin</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        </span><span class="token builtin" style="color:#F2F2F2">bytes32</span><span class="token plain"> _guid</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        </span><span class="token builtin" style="color:#F2F2F2">bytes</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">calldata</span><span class="token plain"> _message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        </span><span class="token builtin" style="color:#F2F2F2">address</span><span class="token plain"> _executor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        </span><span class="token builtin" style="color:#F2F2F2">bytes</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">calldata</span><span class="token plain"> _extraData</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">internal</span><span class="token plain"> virtual override </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        </span><span class="token comment" style="color:#757575">/**</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#757575">         * @dev The `srcEid` (source Endpoint ID) is used to determine the type of incoming message.</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#757575">         * - If `srcEid` is greater than READ_CHANNEL_EID_THRESHOLD (4294965694),</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#757575">         *   it corresponds to arbitrary channel IDs for lzRead responses.</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#757575">         * - All other `srcEid` values correspond to standard LayerZero messages.</span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token comment" style="color:#757575">         */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        </span><span class="token keyword" style="color:#A77DFF;font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">_origin</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">srcEid </span><span class="token operator" style="color:#F2F2F2">&gt;</span><span class="token plain"> READ_CHANNEL_EID_THRESHOLD</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">            </span><span class="token comment" style="color:#757575">// Handle lzRead responses from arbitrary channels.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">            </span><span class="token function" style="color:#8AE06C">_readLzReceive</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">_origin</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> _guid</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> _message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> _executor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> _extraData</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">            </span><span class="token comment" style="color:#757575">// Handle standard LayerZero messages.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">            </span><span class="token function" style="color:#8AE06C">_messageLzReceive</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">_origin</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> _guid</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> _message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> _executor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> _extraData</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token comment" style="color:#757575">/// @notice Internal function to handle standard LayerZero messages.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token comment" style="color:#757575">/// @dev _origin The origin information (unused in this implementation).</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token comment" style="color:#757575">/// @dev _guid The unique identifier for the received message (unused in this implementation).</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token comment" style="color:#757575">/// @param _message The encoded message data.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token comment" style="color:#757575">/// @dev _executor The executor address (unused in this implementation).</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token comment" style="color:#757575">/// @dev _extraData Additional data (unused in this implementation).</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:#A77DFF;font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:#8AE06C">_messageLzReceive</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        Origin </span><span class="token keyword" style="color:#A77DFF;font-style:italic">calldata</span><span class="token plain"> </span><span class="token comment" style="color:#757575">/* _origin */</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        </span><span class="token builtin" style="color:#F2F2F2">bytes32</span><span class="token plain"> </span><span class="token comment" style="color:#757575">/* _guid */</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        </span><span class="token builtin" style="color:#F2F2F2">bytes</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">calldata</span><span class="token plain"> _message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        </span><span class="token builtin" style="color:#F2F2F2">address</span><span class="token plain"> </span><span class="token comment" style="color:#757575">/* _executor */</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        </span><span class="token builtin" style="color:#F2F2F2">bytes</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">calldata</span><span class="token plain"> </span><span class="token comment" style="color:#757575">/* _extraData */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">internal</span><span class="token plain"> virtual </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        </span><span class="token comment" style="color:#757575">// Implement message handling logic here.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        </span><span class="token builtin" style="color:#F2F2F2">bool</span><span class="token plain"> _messageDoSomething </span><span class="token operator" style="color:#F2F2F2">=</span><span class="token plain"> abi</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:#8AE06C">decode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">_message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token builtin" style="color:#F2F2F2">bool</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token comment" style="color:#757575">/// @notice Internal function to handle lzRead responses.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token comment" style="color:#757575">/// @dev _origin The origin information (unused in this implementation).</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token comment" style="color:#757575">/// @dev _guid The unique identifier for the received message (unused in this implementation).</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token comment" style="color:#757575">/// @param _message The encoded message data.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token comment" style="color:#757575">/// @dev _executor The executor address (unused in this implementation).</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token comment" style="color:#757575">/// @dev _extraData Additional data (unused in this implementation).</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token keyword" style="color:#A77DFF;font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:#8AE06C">_readLzReceive</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        Origin </span><span class="token keyword" style="color:#A77DFF;font-style:italic">calldata</span><span class="token plain"> </span><span class="token comment" style="color:#757575">/* _origin */</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        </span><span class="token builtin" style="color:#F2F2F2">bytes32</span><span class="token plain"> </span><span class="token comment" style="color:#757575">/* _guid */</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        </span><span class="token builtin" style="color:#F2F2F2">bytes</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">calldata</span><span class="token plain"> _message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        </span><span class="token builtin" style="color:#F2F2F2">address</span><span class="token plain"> </span><span class="token comment" style="color:#757575">/* _executor */</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        </span><span class="token builtin" style="color:#F2F2F2">bytes</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">calldata</span><span class="token plain"> </span><span class="token comment" style="color:#757575">/* _extraData */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token keyword" style="color:#A77DFF;font-style:italic">internal</span><span class="token plain"> virtual </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        </span><span class="token comment" style="color:#757575">// Implement lzRead response handling logic here.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">        </span><span class="token builtin" style="color:#F2F2F2">bool</span><span class="token plain"> _readDoSomething </span><span class="token operator" style="color:#F2F2F2">=</span><span class="token plain"> abi</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:#8AE06C">decode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">_message</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token builtin" style="color:#F2F2F2">bool</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F2F2F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/v2/developers/evm/technical-reference/transfer-ownership"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Contract Ownership</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/v2/developers/evm/lzread/read-cli"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Read CLI Setup Guide</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#blockchain-query-language" class="table-of-contents__link toc-highlight">Blockchain Query Language</a></li><li><a href="#workflow" class="table-of-contents__link toc-highlight">Workflow</a></li><li><a href="#supported-chains" class="table-of-contents__link toc-highlight">Supported Chains</a></li><li><a href="#installation" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#usage" class="table-of-contents__link toc-highlight">Usage</a><ul><li><a href="#inherit-oappread" class="table-of-contents__link toc-highlight">Inherit OAppRead</a></li><li><a href="#build-read-query" class="table-of-contents__link toc-highlight">Build Read Query</a><ul><li><a href="#getting-the-command" class="table-of-contents__link toc-highlight">Getting the Command</a></li><li><a href="#call-requests" class="table-of-contents__link toc-highlight">Call Requests</a></li><li><a href="#optional-compute-logic" class="table-of-contents__link toc-highlight">Optional: Compute Logic</a></li><li><a href="#encoding-command" class="table-of-contents__link toc-highlight">Encoding Command</a></li></ul></li><li><a href="#optional-declare-compute-logic" class="table-of-contents__link toc-highlight">Optional: Declare Compute Logic</a><ul><li><a href="#compute-settings" class="table-of-contents__link toc-highlight">Compute Settings</a></li><li><a href="#mapping-requests" class="table-of-contents__link toc-highlight">Mapping Requests</a></li><li><a href="#reducing-requests" class="table-of-contents__link toc-highlight">Reducing Requests</a></li></ul></li><li><a href="#creating-request-options" class="table-of-contents__link toc-highlight">Creating Request Options</a></li><li><a href="#receive-responses" class="table-of-contents__link toc-highlight">Receive Responses</a></li><li><a href="#setting-libraries-and-dvns" class="table-of-contents__link toc-highlight">Setting Libraries and DVNs</a></li><li><a href="#setting-read-channel" class="table-of-contents__link toc-highlight">Setting Read Channel</a></li><li><a href="#debugging-read-commands" class="table-of-contents__link toc-highlight">Debugging Read Commands</a><ul><li><a href="#malformed-command" class="table-of-contents__link toc-highlight">Malformed Command</a></li><li><a href="#unresolvable-command" class="table-of-contents__link toc-highlight">Unresolvable Command</a></li></ul></li><li><a href="#dual-messaging-mode" class="table-of-contents__link toc-highlight">Dual Messaging Mode</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="main_lcev"><aside class="logo_RO7a"><a href="https://layerzero.network" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/img/LayerZero_Logo_Black.svg" alt="LayerZero Logo" class="themedImage_ToTc themedImage--light_HNdA footer__logo" width="109" height="30"><img src="/img/LayerZero_Logo_White.svg" alt="LayerZero Logo" class="themedImage_ToTc themedImage--dark_i4oU footer__logo" width="109" height="30"></a></aside><div class="container"><div class="row"><div class="col linksColumn_Wjvf"><div class="links_LlNA"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://layerzero.network/community" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" class="iconExternalLink_2l9O"><path d="M6 1.12354H1.125V10.8735H10.875V5.99854H10.125V10.1235H1.875V1.87354H6V1.12354Z" fill="currentColor"></path><path d="M10.875 1.125H7.50003V1.875H9.5947L5.73486 5.73484L6.26519 6.26516L10.125 2.40533V4.5H10.875V1.125Z" fill="currentColor"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/LayerZero_Labs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" class="iconExternalLink_2l9O"><path d="M6 1.12354H1.125V10.8735H10.875V5.99854H10.125V10.1235H1.875V1.87354H6V1.12354Z" fill="currentColor"></path><path d="M10.875 1.125H7.50003V1.875H9.5947L5.73486 5.73484L6.26519 6.26516L10.125 2.40533V4.5H10.875V1.125Z" fill="currentColor"></path></svg></a></li><li class="footer__item"><a href="https://t.me/joinchat/VcqxYkStIDsyN2Rh" target="_blank" rel="noopener noreferrer" class="footer__link-item">Telegram<svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" class="iconExternalLink_2l9O"><path d="M6 1.12354H1.125V10.8735H10.875V5.99854H10.125V10.1235H1.875V1.87354H6V1.12354Z" fill="currentColor"></path><path d="M10.875 1.125H7.50003V1.875H9.5947L5.73486 5.73484L6.26519 6.26516L10.125 2.40533V4.5H10.875V1.125Z" fill="currentColor"></path></svg></a></li><li class="footer__item"><a href="https://medium.com/layerzero-official" target="_blank" rel="noopener noreferrer" class="footer__link-item">Medium<svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" class="iconExternalLink_2l9O"><path d="M6 1.12354H1.125V10.8735H10.875V5.99854H10.125V10.1235H1.875V1.87354H6V1.12354Z" fill="currentColor"></path><path d="M10.875 1.125H7.50003V1.875H9.5947L5.73486 5.73484L6.26519 6.26516L10.125 2.40533V4.5H10.875V1.125Z" fill="currentColor"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.youtube.com/@LayerZeroLabs" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" class="iconExternalLink_2l9O"><path d="M6 1.12354H1.125V10.8735H10.875V5.99854H10.125V10.1235H1.875V1.87354H6V1.12354Z" fill="currentColor"></path><path d="M10.875 1.125H7.50003V1.875H9.5947L5.73486 5.73484L6.26519 6.26516L10.125 2.40533V4.5H10.875V1.125Z" fill="currentColor"></path></svg></a></li><li class="footer__item"><a href="https://layerzero.network/developers" target="_blank" rel="noopener noreferrer" class="footer__link-item">Developers<svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" class="iconExternalLink_2l9O"><path d="M6 1.12354H1.125V10.8735H10.875V5.99854H10.125V10.1235H1.875V1.87354H6V1.12354Z" fill="currentColor"></path><path d="M10.875 1.125H7.50003V1.875H9.5947L5.73486 5.73484L6.26519 6.26516L10.125 2.40533V4.5H10.875V1.125Z" fill="currentColor"></path></svg></a></li><li class="footer__item"><a href="https://github.com/LayerZero-Labs" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg" class="iconExternalLink_2l9O"><path d="M6 1.12354H1.125V10.8735H10.875V5.99854H10.125V10.1235H1.875V1.87354H6V1.12354Z" fill="currentColor"></path><path d="M10.875 1.125H7.50003V1.875H9.5947L5.73486 5.73484L6.26519 6.26516L10.125 2.40533V4.5H10.875V1.125Z" fill="currentColor"></path></svg></a></li></ul></div></div></div></div><div class="col col--3 emptyColumn_clXS"></div></div></div></div><div class="footer__bottom text--center"><div class="footer__copyright container_oDC8"><div class="copyright_Ak_F">Copyright © 2025 LayerZero Labs, Inc.</div><div class="links_lXnL"><a href="https://layerzero.network/static/privacy-policy" target="_blank" rel="noopener noreferrer" class="link_fkIV">Privacy Policy</a><a href="https://layerzero.network/static/terms-of-use" target="_blank" rel="noopener noreferrer" class="link_fkIV">Terms of Use</a></div></div></div></footer></div>
<script src="/assets/js/runtime~main.808314c4.js"></script>
<script src="/assets/js/main.f10babb7.js"></script>
</body>
</html>